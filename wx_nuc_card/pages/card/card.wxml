<!--pages/card/card.wxml-->
<view class="container">
  <view class="main-core">
  <block wx:for="{{core}}" wx:key="id">
      <view  class="main-core-item" bindtap = "{{item.id}}">
        <image class="core-item-icon" src="/image/core/{{item.id}}.png"></image>
        <text class="core-item-name">{{item.name}}</text>
      </view>
  </block>
    </view>
  <view class="ykt-detail-wraper">
            <view class="ykt-head">
                <text class="ykt-type-name">个人信息：</text>
            </view>                          
            <view class="detail-list">
                <view class="detail-item">
                    <text class="detail-item-label">学院</text>
                    <text class="detail-item-value">{{tapDetail.dpname1}}</text>
                </view>
                <view class="detail-item">
                    <text class="detail-item-label">专业</text>
                    <text class="detail-item-value">{{tapDetail.dpname2}}</text>
                </view>
                <view class="detail-item">
                    <text class="detail-item-label">年级</text>
                    <text class="detail-item-value">{{tapDetail.dpname3}}</text>
                </view>
                <view class="detail-item">
                    <text class="detail-item-label">班级</text>
                    <text class="detail-item-value">{{tapDetail.dpname4}}</text>
                </view>
            </view>
        </view>
    <view wx:if="{{remind}}" class="remind-box">
        <image wx:if="{{remind == '加载中'}}" class="remind-img" src="/image/loading.gif"></image>
        <block wx:else>
          <image class="remind-img" src="/image/nothing.png"></image>
          <text class="remind-text">{{remind}}</text>
        </block>
    </view>
    
    <block wx:else>
        <view class="ykt-card">
            <view class="ykt-black-line"></view>
            <view class="ykt-content">
                <view class="ykt-ye">
                    <text class="ykt-ye-name">余额</text>
                    <view class="ykt-ye-money">
                        <text class="ykt-ye-value">{{balance}}</text>元
                    </view>
                </view>
                <view class="ykt-img">
                    <image src="/image/card-bg.png"></image>
                </view>
            </view>
            <view class="ykt-card-more">
                <text class="ykt-ye-time">截至时间：{{last_time}}</text>
                <text class="ykt-ye-id">卡号：{{userCode}}</text>
            </view>
        </view>

        <text class="grid-remind">近10次交易情况：</text>
        <view class="balance-consumption" bindtap="switchBtn">
            <text class="{{switchBtn ? 'current-btn' : ''}}" id="balance">余额</text>
            <text class="{{switchBtn ? '' : 'current-btn'}}" id="cost">交易额</text>
        </view>
        <view class="grid-wraper">
            <view wx:if="{{canvas_remind}}" class="remind-box">
                <image wx:if="{{canvas_remind == '加载中'}}" class="remind-img" src="/image/loading.gif"></image>
            </view>
            <block wx:else>
                <canvas id="ykt-canvas" canvas-id="firstCanvas" bindtap="canvasTap"></canvas> 
                <view class="line" style="left: {{lineLeft}}px;"></view>
                <view class="y-text">{{switchBtn ? "余额" : "交易额"}}</view>
                <view class="x-text">最近交易</view>
            </block>
        </view>
        <text class="detail-remind">点击上图查看对应交易详情</text>
        <view class="ykt-detail-wraper">
            <view class="ykt-head">
                <text class="ykt-type-name">交易详情</text>
            </view>                          
            <view class="detail-list">
                <view class="detail-item">
                    <text class="detail-item-label">交易时间</text>
                    <text class="detail-item-value">{{tapDetail.opedt}}</text>
                </view>
                <view class="detail-item">
                    <text class="detail-item-label">交易类型</text>
                    <text class="detail-item-value">{{tapDetail.dscrp}}</text>
                </view>
                <view class="detail-item">
                    <text class="detail-item-label">交易金额</text>
                    <text class="detail-item-value">{{(tapDetail.cost>0?'-':'')+tapDetail.cost}}</text>
                </view>
                <view class="detail-item">
                    <text class="detail-item-label">交易设备</text>
                    <text class="detail-item-value">{{tapDetail.termname}}</text>
                </view>
                <view class="detail-item">
                    <text class="detail-item-label">交易余额</text>
                    <text class="detail-item-value">{{tapDetail.balance}}</text>
                </view>
            </view>
        </view>
    
    </block>
</view>